PROGRAM = c--

OCAMLFLAGS = -pp camlp4o
OCAMLDEPFLAGS = -pp camlp4o

NATIVE_ENABLED = true
BYTE_ENABLED = false

.SUBDIRS: src
	FILES = $(removesuffix $(glob *.ml))
	OCamlProgram($(PROGRAM), $(FILES))

	.DEFAULT: $(PROGRAM)

	.PHONY: clean
	clean:
		rm -f $(filter-proper-targets $(glob $(addsuffix .*, $(FILES)))) $(PROGRAM) $(PROGRAM).opt
